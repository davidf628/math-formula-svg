
<!DOCTYPE html>
<html lang="en-US">

<head>

    <title>SVG Formula</title>
    <meta charset="utf-8">
    <meta http-equiv="Content-Security-Policy" >

    <script src="d3.js"></script>

    <!-- -->
    <title>Formula Creator</title>
    <link rel="stylesheet" href="./style.css">

</head>

<html>
<h1>Convert an equation to SVG</h1>

<label for="equation">Enter Equation Below:</label>
<label for="render-engine">Rendering Engine:</label>
<select id="render-engine">
    <option value="AsciiMath">ASCIIMath</option>
    <option value="TeX">TeX</option>
    <option value="inline-TeX">inline TeX</option>
    <option value="MathML">MathML</option>
</select>
<input type="button" value="Make Equation" onClick="convertEqntoSVG()"><br/><br/>
<textarea id="equation" rows="6" cols="60" placeholder="Enter Equation in LaTex or ASCIIMath"></textarea>

<br/><br/>
<div id='equation-space'>Preview will display here.</div>

<p>File name for the SVG output:</p>
<input type="text" id="svg-file-name" size="80"><br/><br/>
<div class="path-container">
    <div class="path-column">Path:</div>
    <div class="path-column" id="svg-path"></div> 
    <div class="path-column"><input type="button" value="Choose Directory..." onClick="openDirectory()"></div>
</div>
<br/><br/>
Syntax References:
<ul>
    <li><a href="http://asciimath.org/" target="_blank">Reference for ASCIIMath Syntax</a></li>
    <li><a href="https://quickref.me/latex.html" target="_blank">LaTex Quick Reference</a></li>
    <li><a href="http://www.cs.put.poznan.pl/ksiek/latexmath.html" target="_blank">LaTex Detailed Reference</a></li>
    <li><a href="https://www.sqlpac.com/en/documents/mathjax-tex-practical-handbook-quick-reference.html" target="_blank">MathJax Reference</a></li>
</ul>

</body>

    <script>
        window.mjAPI.handleEditorEvent( (event, cmd) => {
            switch(cmd.action) {
                case 'load-svg':
                    document.getElementById("equation-space").innerHTML = cmd.data;
                    break;
                case 'set-directory':
                    document.getElementById("svg-path").innerText = cmd.data;
                    break;
                default:
                    break;    
            };
        });

        function convertEqntoSVG() {
            const options = {
                equation_str: document.getElementById("equation").value,
                filename: document.getElementById("svg-file-name").value,
                filepath: document.getElementById("svg-path").innerText,
                render_engine: document.getElementById("render-engine").value
            }
            console.log(options);
            window.mjAPI.makeSVG(options);
        }

        function openDirectory() {
            window.mjAPI.openDirectory();
        }

    </script>

</html>
